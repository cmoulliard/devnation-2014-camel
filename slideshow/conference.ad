:allow-uri-read:
:author: Charles Moulliard
:backend: revealjs
:blog: http://cmoulliard.github.io
:data-uri!:
:demo-git: https://github.com/cmoulliard/devnation-2014-camel
:fa-ellipsis: #&nbsp;#[fa fa-ellipsis-h]#&nbsp;#
//:footer_copyright: Powered by http://asciidoctor.org[Asciidoctor], RevealJS and Hyla
:footer_copyright: Powered by Asciidoctor, Hyla & RevealJS
:icons: font
:idprefix:
:imagesdir: images/
:linkattrs:
:linkcss:
:project_dir: /Users/chmoulli/MyProjects/conferences/devnation-2014
:resourcesdir: /Users/chmoulli/MyProjects/conferences/devnation-2014/demo/snippet/src/main/resources
// Themes : default, beige, moon, blood, night, serif, simple, sky, solarized
:revealjs_theme: my-moon
:revealjs_vertical_alignment: false
:revealjs_history: true
:sourcesdir: /Users/chmoulli/MyProjects/conferences/devnation-2014/demo/snippet/src/main/java/
:source-highlighter: highlightjs
//:source-highlighter: coderay, highlightjs, pygments
:stylesdir: /Users/chmoulli/RedHat/GPE/content/hyla/resources/styles
:title-author: {title} {author}
:title-speaker: Architect Engineer Committer
:twitter: cmoulliard

== *Development of Social Media Projects with Camel*

DevNation / 14th of April - 2014

[.newline]
http://twitter.com/{twitter}[{author}] +
Architect, Engineer & Committer

// *********************************
== Speaker

* Agricultural Engineer & Zoologist
** 19 years of experience in IT world development
** Project manager in Bank, Financial, Telco world
* Specialized in new technologies Web & Integration
* Architect/Engineer @Red Hat

[.newline]
* Committer : Apache ServiceMix, Karaf (PMC), Camel (PMC), Fabric8, Drools, Hawtio, Asciidoctor

image::camel/my-camel.jpg[180,180,float="right"]

// *********************************
== Speaker - con't

[cols=".^5,.^95"]
|===
|image:it/twitter_logo_blue2.png[35,35,vertical-align="top"]|Twitter : http://twitter.com/cmoulliard
|image:it/linkedin.png[35,35]|LinkedIn : http://www.linkedin.com/in/charlesmoulliard
|image:it/github.jpg[35,35]|Blog : http://cmoulliard.github.io
|image:it/slideshare.png[35,35]|Slideshare : http://www.slideshare.net/cmoulliard
|===


+++<aside class="notes">+++
Oh hey, these are some notes. They'll be hidden in your presentation, but you can see them if you open the speaker notes window (hit 's' on your keyboard).
+++</aside>+++

// *********************************
== Country where I live

|===
|image:belgium1.jpeg[] | image:atomium.jpeg[width="75%] |image:manneken.jpeg[]
|image:brussels.jpg[width="85%"]| image:brugge.jpg[width="85%",height="85%"] |
|===

// *********************************
== City where I live

image::dinant.jpeg[float="left"]
image::florennes-place.jpg[]

== What you should know about Belgium

image::frits.jpeg[float="left"]
image::chocolate.jpeg[float="left"]
image::beers.jpeg[float="left"]
image::bande-dessinee.jpeg[float="left"]

// *********************************
== My Passion(s)

image::photography.png[width="35%",height="35%",float="left"]
image::stumpjumper.png[width="30%",height="30%"]
image::nature.jpeg[float="right"]
image::formula1.jpeg[float="right"]

// *********** AGENDA ************
== Agenda

* Introduction

** Camel & Integration
** Social Media Hype
** What Camel can offer
** Use cases covered

* Components
** FaceBook
** Twitter


* Demo & Conclusion

// ************ INTRODUCTION ************
== Agenda

* *Introduction*

** Camel & Integration
** Social Media Hype
** What Camel can offer
** Use cases covered

* Components
** FaceBook
** Twitter


* Demo & Conclusion

// *********************************
== Introduction

|===
| .2+|image:integration/hub.jpeg[width="95%",float="right"]
a| * Integration is +++&nbsp;<i class="fa fa-ellipsis-h"></i>&nbsp;+++ really hard

[.newline]
* +++&nbsp;<i class="fa fa-thumbs-down"></i>&nbsp;+++ protocols, standards, data formats, systems

[.newline]
* Long story since **C**ommon **O**bject **R**equest **B**roker **A**rchitecture
|===

// *********************************
== Introduction - con't

|===
| .2+| image:integration/producer-consumer.png[]
a| * Concepts
** +++<i class="fa fa-arrow-right"></i>+++ Decouple Producer from Consumer
+
** +++<i class="fa fa-arrow-right"></i>+++ Message transport information |
|===


// *********************************
== Introduction

|===
| .2+| image:integration/bus.png[width="95%",float="right"]
a|
[.newline]
* +++&nbsp;<i class="fa fa-wrench"></i>&nbsp;+++ Layer to transport messages : BUS

[.newline]
* +++&nbsp;<i class="fa fa fa-cog fa-spin"></i>&nbsp;+++  ESB, JBI, SCA

image::integration/jbi.jpeg[width="95%",float="right"] |
|===

// ********** CAMEL ********
== Agenda

* Introduction

** *Camel & Integration*
** Social Media Hype
** What Camel can offer
** Use cases covered

* Components
** FaceBook
** Twitter


* Demo & Conclusion

// *********************************
== Camel & Integration

image::camel/camel-box-small.png[width="100%",float="right"]

* OpenSource Java **Integration** Framework

[.newline]
* Based on **D**omain **S**pecific **L**anguage

[.newline]
* Implement **E**nterprise **I**ntegration **P**atterns

image::eip/book.jpg[width="45%",float="right"]

// *********************************
//[data-background="white"]
== Camel & Integration - con't

* http://camel.apache.org/enterprise-integration-patterns.html[> 50 patterns] implemented
* and more : Loadbalancer, throttler, ...

image::eip/patterns.png[width="100%",float="left"]

image::eip/patterns-3.jpg[width="120%",float="left"]

// *********************************
== Camel & Integration - con't

[cols="35,65"]
|===
| .2+|image:camel/factory.png[]
a| * Key features
** Component
** Endpoint
** Consumer
** Producer|
|===

// *********************************
== Camel & Integration - con't

* Key features : route, processor

image:camel/pipeline.png[]

// *********************************
== Camel & Integration - con't

* interceptor : trace, log, capture business events

[.newline]
image:camel/pipeline2.png[]

// *********************************
== Camel & Integration - con't

[cols="45,65"]
|===
| .2+|image:camel/camel-features.png[]
a| * Container for the routes +++&nbsp;<i class="fa fa-arrow-right"></i>&nbsp;+++ CamelContext |
|===

// *********************************
== Camel & Integration - con't

[cols="45,65"]
|===
| .2+|image:camel/camel-features2.png[]
a| * Cross communications not allowed |
|===

// *********************************
== Camel & Integration - con't

[cols="45,65"]
|===
| .2+|image:camel/camel-features3.png[]
a| * Using BUS, Broker, Shared Component |
|===


// *********************************
== Camel & Integration - con't

[cols="65,35"]
|===
| .2+|image:camel/type-converter.png[]
a|* Type Converter Strategy
* Allow to convert the body payloads from one type to another
* To and From these types
** File
** String
** byte[] and ByteBuffer
** InputStream and OutputStream
** Reader and Writer|
|===

// *********************************
== Camel & Integration - con't

* Data Transformation for complex use case

[source, java]
----
include::{sourcesdir}/org/devnation/camel/DataFormat.java[]
----

* Marshalling : Object +++<i class="fa fa-arrow-right"></i>+++ XML (JAXB)
* Unmarshalling : XML +++<i class="fa fa-arrow-right"></i>+++ Object (JAXB)

// *********************************
== Camel & Integration - con't

* http://camel.apache.org/dataformat.html[> 20 Data Format]

image::camel/dataformat-2.png[]


// *********************************
== Camel & Integration - con't

image::camel/inonly.png[width="65%"]

// *********************************
== Camel & Integration - con't

image::camel/inout.png[width="75%"]

// *********************************
== Camel & Integration - con't

* Fluent API

[source,java]
----
include::{sourcesdir}/org/devnation/camel/ExampleRouteBuilder.java[]
----

// *********************************
== Camel & Integration - con't

* Alternative : Spring, Blueprint DSL

[source,xml]
----
include::{resourcesdir}/META-INF/org/devnation/camel/example.xml[]
----

// *********************************
== Camel & Integration - con't

* In memory bus / alternative to JBI, SCA, NMR
* Transport objects : XML, File, Stream, Bytes
* Predicate & Expression language (xslt, xpath, ...)
* Sync/Async exchanges
* Threads Management,
* Tx Architecture
* Error and exception handling
* Policy driven
* Container agnostic

// *********************************
== http://camel.apache.org/components.html[Camel & Integration - con't]

image::camel/components.png[width="85%"]

// ******** Social Media Hype  ********
== Agenda

* Introduction

** Camel & Integration
** *Social Media Hype*
** What Camel can offer
** Use cases covered

* Components
** FaceBook
** Twitter


* Demo & Conclusion

// *********************************
== Social Media Hype

* Business
** Marketing,
** Product Promotion
** Launch Campaign
** Seeking candidates

* Use Social Medias

image::web2/Social-network.png[width="250",height="250", float="left"]
image::web2/ilike.jpeg[width="250",height="250",float="left"]
image::web2/Social-Media-Marketing.jpg[width="250",height="250",float="left"]

// *********************************
== Social Media Hype - con't

Why +++&nbsp;<i class="fa fa-question"></i>&nbsp;+++ __To create content that attracts attention &
encourages readers to share it with their social networks__

image::web2/Social-Media.jpg[width="400",height="300",float="left"]
image::web2/social-solutions.jpg[width="400",height="300",float="right"]

// *********************************
== Social Media Hype

[cols="40,60"]
|===
| .2+| image:web2/concept.jpg[300,300,float="right"]
a| * Web 2.0 “Revolution”
** HTTPs requests image:web2/increase.png[150,150]
** Volume of data exchanged between *Social Medias*
** User becomes actor *collaborating* |
|===

// *********************************
== Social Media Hype - con't

[cols="60,40"]
|===
| .2+| image:web2/html5.png[150, 150, float="right"]
image:web2/ajax1.png[150, 150, float="right"]
image:web2/ajax2.png[150, 150, float="right"]

a| * Technology Transformation
** HTML5
** JavaScript
** Ajax - WebSocket |
|===

image::web2/ajax.png[350, 350, float="left"]
image::websocket.png[270, 270, float="left"]

// ******** What Camel can offer ********
== Agenda

* Introduction

** Camel & Integration
** Social Media Hype
** *What Camel can offer*
** Use cases covered

* Components
** FaceBook
** Twitter


* Demo & Conclusion

// *********************************
== What Camel can offer

image::social-components.png[width="75%",height="75%"]

Could be extended with

* camel-gmail
* camel-dropbox

// *********************************
== What Camel can offer - con't

And EIP Patterns to aggregate, split, transform, multicast content

image::eip/aggregator.png[float="left"]
image::eip/splitter.png[float="left"]

image::eip/transform.png[float="right"]
image::eip/multicast.png[]

// ******** Use cases covered ********
== Agenda

* Introduction

** Camel & Integration
** Social Media Hype
** What Camel can offer
** *Use cases covered*

* Components
** FaceBook
** Twitter


* Demo & Conclusion

// *********************************
== Use cases covered

* Push data

|===
| .2+|image:websocket.png[width="55%"]
a| * Websocket revealed +
** Full-duplex single +
   socket connection
** HTTP request followed +
   by WebSocket data +
   Packets exchange +
** ws:// and wss:// protocol +
** Developed part of HTML5 initiative +
** Specification rfc-6455 (Dec-2011) managed by IETF Task Force |
|===


// *********************************
== Use cases covered - con't

* Collect metrics/stats

// *********************************
== Use cases covered - con't

* Business Activity Monitoring

// ******** Components ********
== Agenda

* Introduction

** Camel & Integration
** Social Media Hype
** What Camel can offer
** Use cases covered

* *Components*
** *FaceBook*
** Twitter


* Demo & Conclusion

// *********************************
== Components

* One common denominator +++&nbsp;<i class="fa fa-arrow-right"></i>&nbsp;+++ OAuth
image:web2/oauth-2.png[75,75]

**O**pen standard for **Auth**orization

image::web2/oauth.gif[width="40%",height="40%",float="center"]

// *********************************
== FaceBook

- Info : http://camel.apache.org/facebook.html
- Grant Access :  https://developers.facebook.com/apps
- API : http://facebook4j.org/en/index.html

[source, java]
----
include::{sourcesdir}/org/devnation/camel/FacebookExample.java[tag=snippetRoute]
----

// *********************************
== FaceBook - con't
- OAuth

[source, java]
----
include::{sourcesdir}/org/devnation/camel/FacebookExample.java[tag=snippetOAuth]
----

- Externalize tokens http://camel.apache.org/using-propertyplaceholder.html[parameters] with Property PlaceHolder

[source, java]
----
include::{resourcesdir}/META-INF/org/devnation/camel/credentials.properties[]
----


// *********************************
== FaceBook

- To create a post within your Facebook profile

- Send a facebook4j.PostUpdate body to a camel facebook producer

[source, java]
----
include::{sourcesdir}/org/devnation/camel/FacebookExample.java[tag=snippetRouteP]
----

// ******** Twitter ********
== Agenda

* Introduction

** Camel & Integration
** Social Media Hype
** What Camel can offer
** Use cases covered

* *Components*
** FaceBook
** *Twitter*

* Demo & Conclusion

// *********************************
== Twitter

- Info : http://camel.apache.org/twitter.html
- Grant Access :  https://dev.twitter.com/apps/new
- API : http://twitter4j.org/en/index.html

Example
[source, java]
----
include::{sourcesdir}/org/devnation/camel/TwitterExample.java[tag=snippetRoute]
----

// *********************************
== Twitter - con't
OAuth

[source, java]
----
include::{sourcesdir}/org/devnation/camel/TwitterExample.java[tag=snippetOAuth]
----

Advanced Query

https://support.twitter.com/articles/71577-using-advanced-search

// *********************************
== Twitter - con't

- Post a tweet

[source, java]
----
include::{sourcesdir}/org/devnation/camel/TwitterExample.java[tag=snippetRouteP]
----

// *********************************
== Twitter - con't

- Object / JSON
- Use utility like Google JSON API
- Marshall/Unmmarshall https://camel.apache.org/json.html[JSON]

// *********************************
== Twitter - con't

BAD - +++&nbsp;<i class="fa fa-frown-o"></i>&nbsp;+++

[source, java]
----
String data = "{ " +
    " \"" + "timestamp" + "\" : \"" + formatDate(generateTimeStamp()) + "\"," +
    " \"" + "createdAt" + "\" : \"" + status.getCreatedAt().toString() + "\"," +
    " \"" + "id" + "\" : \"" + status.getId() + "\"," +
    " \"" + "text" + "\" : \"" + status.getText() + '\'' + "\"," +
    " \"" + "isFavorited" + "\" : \"" + status.isFavorited() + "\"," +
    " \"" + "isRetweeted" + "\" : \"" + status.isRetweeted() + "\"," +
    " \"" + "favoriteCount" + "\" : \"" + status.getFavoriteCount() + "\"," +
    " \"" + "inReplyToScreenName" + "\" : \"" + status.getInReplyToScreenName() + '\'' + "\"," +
    " \"" + "geoLocation" + "\" : \"" + status.getGeoLocation() + "\"," +
    " \"" + "place" + "\" : \"" + status.getPlace() + "\"," +
    " \"" + "retweetCount" + "\" : \"" + status.getRetweetCount() + "\"," +
    " \"" + "isoLanguageCode" + "\" : \"" + status.getIsoLanguageCode() + "\"," +
    " \"" + "user" + "\" : \"" + status.getUser().getName() + "\"," +
    " \"" + "country" + "\" : \"" + country + "\"" +
    " }";
----

// *********************************
== Twitter - con't

BETTER - +++&nbsp;<i class="fa fa-smile-o"></i>&nbsp;+++

[source, java]
----
  private void init(JSONObject json) throws TwitterException {
  	id = getLong("id", json);
  	source = getUnescapedString("source", json);
  	createdAt = getDate("created_at", json);
  	isTruncated = getBoolean("truncated", json);
  	inReplyToStatusId = getLong("in_reply_to_status_id", json);
  	inReplyToUserId = getLong("in_reply_to_user_id", json);
  	isFavorited = getBoolean("favorited", json);
----

// ******** Demo & Conclusion ********
== Agenda

* Introduction

** Camel & Integration
** Social Media Hype
** What Camel can offer
** Use cases covered

* Components
** FaceBook
** Twitter

* *Demo & Conclusion*

// *********************************
== Demo & Conclusion

// *********************************
== Questions

[cols="35,.<65"]
|===

.2+|image:questions.png[width="95%"]
a|* Twitter : http://twitter.com/cmoulliard[@cmoulliard]
a|* More info : http://www.redhat.com[RedHat Middleware]
|===

* Demo code:
  {demo-git}

